# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class Icm < Formula
  desc "Generate or validate intermodal container markings."
  homepage "https://github.com/meyermarcel/icm"
  version "3.2.6"

  on_macos do
    on_intel do
      url "https://github.com/meyermarcel/icm/releases/download/3.2.6/icm_Darwin_x86_64.tar.gz"
      sha256 "8f6eacb866717563f30baa1c42e41c413bf0af410523e47fdf7b16496ad05c56"

      def install
        bin.install "icm"

        # Install bash completion
        bash_output = Utils.popen_read("#{bin}/icm completion bash")
        (bash_completion/"icm").write bash_output

        # Install zsh completion
        zsh_output = Utils.popen_read("#{bin}/icm completion zsh")
        (zsh_completion/"_icm").write zsh_output

        # Install fish completion
        fish_output = Utils.popen_read("#{bin}/icm completion fish")
        (fish_completion/"icm.fish").write fish_output

        # man-pages is also defined in Makefile
        man1.install Dir["docs/man-pages/man1/*.1"]
      end
    end
    on_arm do
      url "https://github.com/meyermarcel/icm/releases/download/3.2.6/icm_Darwin_arm64.tar.gz"
      sha256 "65ff22ef1cc30a04c4e8ef822f74386b57033ff5f46b9ed154639db5fff9c765"

      def install
        bin.install "icm"

        # Install bash completion
        bash_output = Utils.popen_read("#{bin}/icm completion bash")
        (bash_completion/"icm").write bash_output

        # Install zsh completion
        zsh_output = Utils.popen_read("#{bin}/icm completion zsh")
        (zsh_completion/"_icm").write zsh_output

        # Install fish completion
        fish_output = Utils.popen_read("#{bin}/icm completion fish")
        (fish_completion/"icm.fish").write fish_output

        # man-pages is also defined in Makefile
        man1.install Dir["docs/man-pages/man1/*.1"]
      end
    end
  end

  on_linux do
    on_intel do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/meyermarcel/icm/releases/download/3.2.6/icm_Linux_x86_64.tar.gz"
        sha256 "86d39dabcae3f26355693b6de712ccee1e4a507512d87dc82a1791d9a9fd6cf9"

        def install
          bin.install "icm"

          # Install bash completion
          bash_output = Utils.popen_read("#{bin}/icm completion bash")
          (bash_completion/"icm").write bash_output

          # Install zsh completion
          zsh_output = Utils.popen_read("#{bin}/icm completion zsh")
          (zsh_completion/"_icm").write zsh_output

          # Install fish completion
          fish_output = Utils.popen_read("#{bin}/icm completion fish")
          (fish_completion/"icm.fish").write fish_output

          # man-pages is also defined in Makefile
          man1.install Dir["docs/man-pages/man1/*.1"]
        end
      end
    end
    on_arm do
      if !Hardware::CPU.is_64_bit?
        url "https://github.com/meyermarcel/icm/releases/download/3.2.6/icm_Linux_armv6.tar.gz"
        sha256 "0d3bae27666ca6d4a87f97489e574883938f85b0d54006bd56f02757f614c7b2"

        def install
          bin.install "icm"

          # Install bash completion
          bash_output = Utils.popen_read("#{bin}/icm completion bash")
          (bash_completion/"icm").write bash_output

          # Install zsh completion
          zsh_output = Utils.popen_read("#{bin}/icm completion zsh")
          (zsh_completion/"_icm").write zsh_output

          # Install fish completion
          fish_output = Utils.popen_read("#{bin}/icm completion fish")
          (fish_completion/"icm.fish").write fish_output

          # man-pages is also defined in Makefile
          man1.install Dir["docs/man-pages/man1/*.1"]
        end
      end
    end
    on_arm do
      if Hardware::CPU.is_64_bit?
        url "https://github.com/meyermarcel/icm/releases/download/3.2.6/icm_Linux_arm64.tar.gz"
        sha256 "80afff396433503234df96e842d7b95c735af771b968a9e9346d0301ac106e2d"

        def install
          bin.install "icm"

          # Install bash completion
          bash_output = Utils.popen_read("#{bin}/icm completion bash")
          (bash_completion/"icm").write bash_output

          # Install zsh completion
          zsh_output = Utils.popen_read("#{bin}/icm completion zsh")
          (zsh_completion/"_icm").write zsh_output

          # Install fish completion
          fish_output = Utils.popen_read("#{bin}/icm completion fish")
          (fish_completion/"icm.fish").write fish_output

          # man-pages is also defined in Makefile
          man1.install Dir["docs/man-pages/man1/*.1"]
        end
      end
    end
  end

  test do
    system "#{bin}/icm --version"
  end
end
